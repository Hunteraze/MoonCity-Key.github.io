<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ключ</title>
<style>
  html, body {
    height: 100%;
    margin: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    color: #000;
    display: flex;
    justify-content: center;
    align-items: center;
    background: white;
    animation: bgColorShift 60s linear infinite;
  }

  @keyframes bgColorShift {
    0%   { background-color: rgb(255,255,255); }       /* белый */
    11%  { background-color: rgb(255,77,77); }         /* красный */
    22%  { background-color: rgb(255,140,0); }         /* оранжевый */
    33%  { background-color: rgb(255,215,0); }         /* желтый */
    44%  { background-color: rgb(0,255,0); }           /* зеленый */
    55%  { background-color: rgb(0,255,255); }         /* голубой */
    66%  { background-color: rgb(0,0,255); }           /* синий */
    77%  { background-color: rgb(139,0,255); }         /* фиолетовый */
    88%  { background-color: rgb(255,20,147); }        /* розовый */
    100% { background-color: rgb(255,255,255); }       /* белый */
  }

  .container {
    background: rgba(255, 255, 255, 0.8);
    padding: 30px 40px;
    border-radius: 15px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    text-align: center;
    max-width: 400px;
    width: 90%;
  }

  #key-text {
    margin-bottom: 20px;
    font-size: 1.4rem;
    word-break: break-word;
    min-height: 60px;
    color: #333;
    user-select: all;
  }

  button {
    padding: 10px 25px;
    font-size: 1rem;
    background-color: rgb(20,20,20);
    border: 2px solid rgba(25,25,25,0.7);
    border-radius: 8px;
    cursor: pointer;
    color: white;
    font-weight: 600;
    transition: background-color 0.3s, color 0.3s, border-color 0.3s;
  }
  button:hover {
    background-color: rgb(40,40,40);
    border-color: rgba(60,60,60,0.9);
  }
</style>
</head>
<body>
  <div class="container">
    <div id="key-text">Загрузка ключа...</div>
    <button id="copy-btn">Скопировать</button>
  </div>

<script>
  const pastebinURL = 'https://raw.githubusercontent.com/trttesfs/KEY.MoonCity/main/Key';
  const corsProxy = 'https://cors-anywhere.herokuapp.com/';

  async function fetchKey() {
    try {
      const response = await fetch(corsProxy + pastebinURL);
      if (!response.ok) throw new Error('Ошибка сети');
      const text = await response.text();
      document.getElementById('key-text').textContent = text.trim();
    } catch (error) {
      document.getElementById('key-text').textContent = 'Ошибка при загрузке ключа.';
      console.error('Ошибка загрузки ключа:', error);
    }
  }

  function copyKey() {
    const keyText = document.getElementById('key-text').textContent;
    if (!keyText || keyText === 'Ошибка при загрузке ключа.') {
      alert('Нет ключа для копирования.');
      return;
    }
    if (navigator.clipboard && window.isSecureContext) {
      navigator.clipboard.writeText(keyText).then(() => {
        alert('Ключ скопирован!');
      }).catch(() => {
        fallbackCopy(keyText);
      });
    } else {
      fallbackCopy(keyText);
    }
  }

  function fallbackCopy(text) {
    const textarea = document.createElement('textarea');
    textarea.value = text;
    textarea.style.position = 'fixed';
    textarea.style.left = '-9999px';
    document.body.appendChild(textarea);
    textarea.select();
    try {
      const successful = document.execCommand('copy');
      if(successful){
        alert('Ключ скопирован!');
      } else {
        alert('Ошибка копирования.');
      }
    } catch {
      alert('Ошибка копирования.');
    }
    document.body.removeChild(textarea);
  }

  document.getElementById('copy-btn').addEventListener('click', copyKey);

  fetchKey();
</script>
</body>
</html>
